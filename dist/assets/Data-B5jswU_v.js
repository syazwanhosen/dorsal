import{j as e}from"./radix-hoWLJplZ.js";import{f as R,a as z,b as W,c as U,d as V,e as T,N as B,H as K,F as $,S as G}from"./index-Bl-JI4NS.js";import{a as l}from"./react-DyejIWKk.js";import{o as Y,H as J,P as X,B as Z}from"./ui-lp5hxHkm.js";import{s as D,g as q,a as Q,j as ee}from"./charts-ZmEBPBrd.js";import{f as te}from"./maps-Cu4X6U0v.js";import"./redux-CrWtP8Qi.js";const se=()=>{const[a,o]=l.useState({total_states:0,total_hospitals:0,total_services:0,total_categories:0});l.useEffect(()=>{(async()=>{try{const i=await R();o(i)}catch(i){console.error("Error fetching statistics:",i)}})()},[]);const r=[{icon:e.jsx(Y,{size:32,className:"text-purple"}),label:"Total States",value:a.total_states,bgColor:"bg-light-purple"},{icon:e.jsx(J,{size:32,className:"text-green"}),label:"Total Hospitals",value:a.total_hospitals,bgColor:"bg-light-green"},{icon:e.jsx(X,{size:32,className:"text-red"}),label:"Total Services",value:a.total_services,bgColor:"bg-light-red"},{icon:e.jsx(Z,{size:32,className:"text-yellow"}),label:"Service Categories",value:a.total_categories,bgColor:"bg-light-yellow"}];return e.jsxs("section",{id:"TotalStats",className:"container py-6 px-4 sm:px-6 md:px-4 lg:px-8 xl:px-16",children:[e.jsx("h2",{className:"text-xl font-bold pb-4 text-left",children:"Overview"}),e.jsx("div",{className:"border rounded-lg p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((c,i)=>e.jsxs("div",{className:"relative flex items-center p-4 rounded-lg bg-white",children:[i>0&&e.jsx("div",{className:"hidden lg:block absolute left-0 top-1/2 -translate-y-1/2 h-16 border-l border-dashed border-gray-300",style:{left:"-15px"}}),e.jsx("div",{className:`rounded p-3 ${c.bgColor}`,children:c.icon}),e.jsxs("div",{className:"ml-6",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:c.label}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-left text-black",children:c.value})]})]},i))})]})},w={"01":{name:"Alabama",abbr:"AL"},"02":{name:"Alaska",abbr:"AK"},"04":{name:"Arizona",abbr:"AZ"},"05":{name:"Arkansas",abbr:"AR"},"06":{name:"California",abbr:"CA"},"08":{name:"Colorado",abbr:"CO"},"09":{name:"Connecticut",abbr:"CT"},10:{name:"Delaware",abbr:"DE"},11:{name:"District of Columbia",abbr:"DC"},12:{name:"Florida",abbr:"FL"},13:{name:"Georgia",abbr:"GA"},15:{name:"Hawaii",abbr:"HI"},16:{name:"Idaho",abbr:"ID"},17:{name:"Illinois",abbr:"IL"},18:{name:"Indiana",abbr:"IN"},19:{name:"Iowa",abbr:"IA"},20:{name:"Kansas",abbr:"KS"},21:{name:"Kentucky",abbr:"KY"},22:{name:"Louisiana",abbr:"LA"},23:{name:"Maine",abbr:"ME"},24:{name:"Maryland",abbr:"MD"},25:{name:"Massachusetts",abbr:"MA"},26:{name:"Michigan",abbr:"MI"},27:{name:"Minnesota",abbr:"MN"},28:{name:"Mississippi",abbr:"MS"},29:{name:"Missouri",abbr:"MO"},30:{name:"Montana",abbr:"MT"},31:{name:"Nebraska",abbr:"NE"},32:{name:"Nevada",abbr:"NV"},33:{name:"New Hampshire",abbr:"NH"},34:{name:"New Jersey",abbr:"NJ"},35:{name:"New Mexico",abbr:"NM"},36:{name:"New York",abbr:"NY"},37:{name:"North Carolina",abbr:"NC"},38:{name:"North Dakota",abbr:"ND"},39:{name:"Ohio",abbr:"OH"},40:{name:"Oklahoma",abbr:"OK"},41:{name:"Oregon",abbr:"OR"},42:{name:"Pennsylvania",abbr:"PA"},44:{name:"Rhode Island",abbr:"RI"},45:{name:"South Carolina",abbr:"SC"},46:{name:"South Dakota",abbr:"SD"},47:{name:"Tennessee",abbr:"TN"},48:{name:"Texas",abbr:"TX"},49:{name:"Utah",abbr:"UT"},50:{name:"Vermont",abbr:"VT"},51:{name:"Virginia",abbr:"VA"},53:{name:"Washington",abbr:"WA"},54:{name:"West Virginia",abbr:"WV"},55:{name:"Wisconsin",abbr:"WI"},56:{name:"Wyoming",abbr:"WY"}},E=(a,o,r,c=!1)=>{if(isNaN(a)||r===o)return"hsl(234, 84%, 95%)";let m=95-(a-o)/(r-o)*50;return c&&(m-=10,m<10&&(m=10)),`hsl(234, 84%, ${m}%)`};function ae(a){return typeof a=="object"&&a!==null&&"features"in a&&Array.isArray(a.features)}const re=({onStateHover:a,pricingData:o,minPrice:r,maxPrice:c})=>{const i=l.useRef(null),m=()=>{if(!i.current)return;D(i.current).selectAll("svg").remove();const b=i.current.clientWidth,y=500,F=D(i.current).append("svg").attr("width",b).attr("height",y),A=q().translate([b/2,y/2]).scale(b),u=Q().projection(A);ee("https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json").then(S=>{const h=te(S,S.objects.states);if(!ae(h)){console.error("Invalid states feature",h);return}const C=h.features;F.selectAll("path").data(C).enter().append("path").attr("d",u).attr("class","stroke-white").attr("stroke","#fff").attr("stroke-width",.5).attr("fill",f=>{var p;const v=f.id,g=(p=w[v])==null?void 0:p.abbr,d=g?o[g]:void 0;return d!==void 0&&!isNaN(d)?E(d,r,c):"#eee"}).on("mouseover",function(f,v){const g=v.id,d=w[g],p=d==null?void 0:d.abbr,H=p?o[p]:void 0;d&&H!==void 0?a(d.name,H.toString()):d&&a(d.name,"N/A"),D(this).attr("filter",null).attr("fill",k=>{var x;const n=k.id,t=(x=w[n])==null?void 0:x.abbr,s=t?o[t]:void 0;return s!==void 0&&!isNaN(s)?E(s,r,c,!0):"#ccc"})}).on("mouseout",function(){D(this).attr("fill",f=>{var p;const v=f.id,g=(p=w[v])==null?void 0:p.abbr,d=g?o[g]:void 0;return d!==void 0&&!isNaN(d)?E(d,r,c):"#eee"})})})};return l.useEffect(()=>{m();const b=()=>{m()};return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}},[o,r,c]),e.jsx("div",{ref:i,className:"w-full h-[500px]"})},le=({categories:a,selectedCategory:o,setSelectedCategory:r,handleReset:c,onGenerateHeatmap:i})=>e.jsxs("div",{className:"p-4 border rounded-lg shadow-sm bg-white",children:[e.jsx("h3",{className:"text-lg font-bold text-black pb-4",children:"Service Category"}),e.jsxs("div",{className:"flex flex-col items-center gap-4 w-72 mx-auto",children:[e.jsxs("select",{id:"category-select",className:"border border-gray-300 px-4 pr-10 py-2 rounded-lg text-gray-700 w-full",value:o,onChange:m=>r(m.target.value),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Category"}),a.map(m=>e.jsx("option",{value:m,children:m},m))]}),e.jsx("button",{className:"bg-purple text-white py-2 rounded-lg hover:bg-purple-700 w-full",onClick:i,children:"Generate Heatmap"}),e.jsx("button",{className:"border border-purple-400 text-black py-2 rounded-lg hover:bg-purple-50 w-full",onClick:c,children:"Reset"})]})]}),O=({label:a,items:o})=>e.jsxs("div",{className:"p-4 border rounded-lg shadow-sm bg-white",children:[e.jsx("h3",{className:"text-lg font-bold text-black",children:a}),o.map((r,c)=>e.jsxs("div",{className:"flex items-center justify-between mt-1",style:{minHeight:"35px"},children:[e.jsx("div",{className:"min-w-0 pr-2 flex-1",children:e.jsx("p",{className:"text-purple text-base font-medium truncate",style:{lineHeight:"1.3"},children:r.state||"N/A"})}),e.jsx("div",{className:"flex items-center justify-end gap-2 shrink-0",style:{minWidth:"100px",alignItems:"center"},children:r.value!==null&&r.value!==void 0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-5 h-5 rounded-sm flex-shrink-0",style:{backgroundColor:r.color}}),e.jsxs("span",{className:"text-gray-700 text-sm font-medium text-right",style:{width:"60px",textAlign:"right"},children:["$",r.value.toFixed(2)]})]}):e.jsx("div",{className:"text-gray-500 text-sm font-medium text-right whitespace-nowrap",style:{width:"150px",textAlign:"right",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:"No Price Available"})})]},c))]}),ne=()=>{const[a,o]=l.useState(""),[r,c]=l.useState({}),[i,m]=l.useState({}),[b,y]=l.useState("Overall"),[F,A]=l.useState([]);l.useEffect(()=>{z().then(n=>A(n.categories)).catch(n=>console.error("Error fetching categories:",n))},[]),l.useEffect(()=>{o(""),c({}),m({})},[b]),l.useEffect(()=>S(),[]);const u=()=>{y(""),o(""),c({})},S=()=>{W(b).then(n=>{if(!n||typeof n!="object"||Object.keys(n).length===0){alert("No pricing data available for this category.");return}const t={},s=n.prices,x=n.distributed_prices||{};for(const j in s){const N=s[j];let M;if(typeof N=="number"?M=N:N&&"avg"in N&&(M=N.avg),M!=null){let P=j.length===2?j.toUpperCase():"";if(!P){for(const I in w)if(w[I].name.toLowerCase()===j.toLowerCase()){P=w[I].abbr;break}}P&&(t[P]=parseFloat(M.toString()))}}c(t),m(x)}).catch(n=>{console.error("Error fetching pricing data:",n),alert(`Failed to load pricing data: ${n.message||"Unknown error"}. Please try again.`)})},h=()=>{if(b)S();else return alert("Please select a category first")},C=Object.values(r).filter(n=>!isNaN(n)),f=Math.min(...C),v=Math.max(...C),d=(n=>{var t;return((t=Object.values(w).find(s=>s.name===n))==null?void 0:t.abbr)||""})(a),p=r[d]??0,H=E(p,f,v),k=Object.entries(i).map(([n,t])=>{var x;return{state:((x=Object.values(w).find(j=>j.abbr===n))==null?void 0:x.name)||n,value:t!=null?parseFloat(t.toFixed(2)):null,color:E(t,f,v)}});return e.jsx("section",{id:"StatewisePricing",className:"container py-4 sm:px-6 md:px-4 lg:px-8 xl:px-16",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-left",children:["Statewide"," ",e.jsxs("span",{className:"bg-gradient-to-b text-transparent bg-clip-text text-purple",children:["Healthcare"," ","Price"," "]}),"Comparison"]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4 shadow-sm w-full lg:w-2/3",children:[e.jsx("h2",{className:"text-lg font-bold text-center lg:text-left mb-2",children:b||""}),e.jsx("div",{className:"w-full h-96 sm:h-[28rem] md:h-[32rem] flex items-center justify-center rounded",children:e.jsx("div",{id:"us-map",className:"w-full max-w-[900px] mx-auto",children:e.jsx(re,{onStateHover:n=>o(n),pricingData:r,minPrice:f,maxPrice:v})})})]}),e.jsxs("div",{className:"flex flex-col gap-4 w-full lg:w-1/3",children:[e.jsx(le,{categories:F,selectedCategory:b,setSelectedCategory:y,handleReset:u,onGenerateHeatmap:h}),b&&e.jsxs(e.Fragment,{children:[k.length>0&&e.jsx(O,{label:"Distributed Prices",items:k}),a&&e.jsx(O,{label:"Selected State",items:[{state:a||"No State selected",value:isNaN(p)||p===0?null:p,color:H}]})]})]})]})]})})},oe=()=>{const[a,o]=l.useState(!1);return e.jsxs("div",{className:"relative w-full h-full",children:[!a&&e.jsx("div",{className:"absolute z-10 flex items-center justify-center w-full h-full bg-white bg-opacity-80",children:e.jsx("div",{className:"w-10 h-10 border-4 border-purple border-t-transparent rounded-full animate-spin"})}),e.jsx("iframe",{src:"/google_address_map_negotiated_fixed.html",width:"100%",height:"100%",title:"Google Address Map",onLoad:()=>o(!0),className:"relative z-0"})]})},ie=({onLoad:a})=>{const[o,r]=l.useState(!1),c=()=>{r(!0),a&&a()};return e.jsxs("div",{className:"relative w-full h-full",children:[!o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80",children:e.jsx("div",{className:"w-10 h-10 border-4 border-purple border-t-transparent rounded-full animate-spin"})}),e.jsx("iframe",{id:"chartFrame",src:"/cost_comparison.html",width:"100%",height:"100%",title:"Cost Comparison Chart",onLoad:c,className:"relative z-0"})]})},ce=()=>e.jsx("section",{id:"HospitalPrices",className:"container py-6 sm:px-6 md:px-4 lg:px-8 xl:px-16",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-left",children:[e.jsxs("span",{className:"bg-gradient-to-b text-transparent bg-clip-text text-purple",children:["Hospitals"," "]}),"Prices"]}),e.jsx("div",{className:"rounded-lg border shadow-sm bg-white",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-center sm:text-left",children:"Fixed-Price vs. Negotiated-Price Hospitals"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center sm:space-x-8 gap-2 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-green-legend"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Fixed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-legend"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Negotiated"})]})]})]}),e.jsx("div",{className:"w-full h-48 sm:h-64 md:h-80 min-h-[631px] bg-gray-100 flex items-center justify-center rounded",children:e.jsx(oe,{})})]})})]})}),L="FL - Florida",de="Lakewood Ranch Medical Center",_="CA - California",me="Marian Regional Medical Center",pe=()=>{const[a,o]=l.useState([]),[r,c]=l.useState(L),[i,m]=l.useState(_),[b,y]=l.useState([]),[F,A]=l.useState([]),[u,S]=l.useState(de),[h,C]=l.useState(me),[f,v]=l.useState("min"),[g,d]=l.useState(!1),[p,H]=l.useState(!1);l.useEffect(()=>{(async()=>{try{const s=await V();o(s)}catch(s){console.error("Error loading states:",s)}})()},[]),l.useEffect(()=>{(async()=>{try{const[s,x]=await Promise.all([T(L),T(_)]);y(s),A(x)}catch(s){console.error("Error loading hospitals:",s)}})()},[]),l.useEffect(()=>{r&&r!==L&&(async()=>{try{const s=await T(r);y(s),S("")}catch(s){console.error(`Error loading hospitals for ${r}:`,s)}})()},[r]),l.useEffect(()=>{i&&i!==_&&(async()=>{try{const s=await T(i);A(s),C("")}catch(s){console.error(`Error loading hospitals for ${i}:`,s)}})()},[i]),l.useEffect(()=>{if(p&&u&&h){const t=setTimeout(()=>{k("min")},300);return()=>clearTimeout(t)}},[p,u,h]);const k=async t=>{if(!(!u||!h)){v(t),d(!0);try{const s=await U(u,h),x=Object.keys(s).reduce((j,N)=>(j[N]={[u]:s[N][u],[h]:s[N][h]},j),{});n(x,t)}catch(s){console.error("Comparison error:",s)}finally{d(!1)}}},n=(t,s)=>{const x=document.getElementById("chartFrame");x!=null&&x.contentWindow?x.contentWindow.postMessage({type:"compareHospitals",hospitals:[u,h],data:t,priceType:s},"*"):setTimeout(()=>n(t,s),300)};return e.jsx("section",{id:"HospitalPrices",className:"container pt-4 lg:pb-12 pb-8 px-4 sm:px-6 md:px-4 lg:px-8 xl:px-16",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-left",children:[e.jsxs("span",{className:"bg-gradient-to-b text-transparent bg-clip-text text-purple",children:["Cost Comparison"," "]}),"Across Medical Services"]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 lg:py-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full md:w-1/2 lg:pr-8",children:[e.jsx("div",{className:"relative w-full",children:e.jsxs("select",{value:r,onChange:t=>c(t.target.value),className:"w-full p-2 border border-gray-300 rounded bg-white pr-12 appearance-none",style:{color:"#495057",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23495057" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 1rem center",backgroundSize:"1em",transition:"var(--transition)"},disabled:g,children:[e.jsx("option",{value:"",children:"Select State"}),a.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"relative w-full",children:e.jsxs("select",{value:u,onChange:t=>S(t.target.value),className:"w-full p-2 border border-gray-300 rounded bg-white pr-12",disabled:!r||g,children:[e.jsx("option",{value:"",children:"Select Hospital"}),b.map(t=>e.jsx("option",{value:t,children:t},t))]})})]}),e.jsx("div",{className:"text-2xl font-bold text-purple md:block",children:"VS"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full md:w-1/2 lg:pl-8",children:[e.jsx("div",{className:"relative w-full",children:e.jsxs("select",{value:i,onChange:t=>m(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-black pr-12",disabled:g,children:[e.jsx("option",{value:"",children:"Select State"}),a.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"relative w-full",children:e.jsxs("select",{value:h,onChange:t=>C(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-black pr-12",disabled:!i||g,children:[e.jsx("option",{value:"",children:"Select Hospital"}),F.map(t=>e.jsx("option",{value:t,children:t},t))]})})]})]}),e.jsxs("div",{className:"w-full h-48 sm:h-64 md:h-80 min-h-[600px] bg-white border items-center justify-center rounded px-4 relative",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center py-5",children:[e.jsx("div",{className:"text-lg font-bold text-black pb-4",children:f==="min"?"Comparing Minimum Price":"Comparing Maximum Price"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{value:f,onChange:t=>k(t.target.value),className:"px-4 py-2 rounded bg-purple text-white cursor-pointer pr-8 appearance-none",style:{color:"#FFFFFF",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1em",transition:"var(--transition)"},children:[e.jsx("option",{value:"min",children:"Show Minimum Prices"}),e.jsx("option",{value:"max",children:"Show Maximum Prices"})]})})]}),u&&h?e.jsx(ie,{onLoad:()=>H(!0)}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center text-gray-600 text-base px-4",children:"Choose hospitals from the dropdowns above to view pricing comparison"})]})]})})};function je(){return e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsx(K,{title:"Explore Data"}),e.jsx(se,{}),e.jsx(ne,{}),e.jsx(ce,{}),e.jsx(pe,{}),e.jsx($,{}),e.jsx(G,{})]})}export{je as default};
